# learning_cardinality_estimator_distributed_exploration  
abstract  
## INTRODUCTION  
    垂直分片的影响(已有实验)  
    水平分片的影响(理论分析 + 实验结果)  
    分区键等影响  
## PRELIMINARIES  
    在分布式数据库中，各个节点中基数估计所求的选择率都是原始定义域中对应基数估计的条件概率，先验信息是划分过程所用的函数 ***一种狄利克雷分布*** 。在各节点中采样并建模得到模型(指直方图、ml模型等)，是属于该节点的条件概率密度函数(或条件概率分布函数)，涉及多个表(分布式节点中的表，不一定等于数据库的表)的join的基数估计问题会涉及求相关节点的联合概率密度(或联合分布)。***分布式基数估计和集中式基数估计的主要区别是，前者是从条件概率出发求联合概率(全部属性的子集)，后者是从联合概率(全部属性)出发求条件概率***  
## OVERVIEW  
    和SPN的差别 : SPN叶节点间的相关性是确定的，有规律的，分布式数据库中各节点间则不一定。
    分布式学习型基数估计面对的问题 : 以处理表间连接为基础，需要解决 :  
    (1)针对原本单表的基数估计，因为分区操作本来的一个表会形成多个子表，针对一个表的查询会转化成对其子表的连接查询的基数估计(消除垂直化分的影响，本质是多表连接问题，不确定不同子表的数据存在相关性，所以考虑全外连接。需要采样后进行全外连接(不能先全外连接再采样，使用分布式数据库不用集中式数据库的原因就是数据规模过大，如果先全外连接就违背了这一前提。))。产生了新的问题 :  
        a.如何采样？计划使用gmm模拟分布然后按概率采样，但这只是单列上的，多列的怎么办？引用正则流基数估计法产生的概率分布？使用多维直方图产生的概率分布？前者更准确但是更复杂更慢，后者简单但大误差可能会造成严重影响，如何选择。如果先采样后连接，随机采样可能会导致主键对不一致无法全外连接。用有条件采样对使用模型对影响？这样训练出对应模型可以解决垂直划分的影响(如何回避全外连接固有的问题？)要是想保证不同表中采样样本一定能连接，相当于进行查询？。  
        b.直接相加解决水平划分的影响(涉及分区键)；  
    (2)针对多表连接查询的基数估计，可能转化为多子表间连接查询的基数估计。产生了新的问题 :  
        a.如果利用问题(1)的解决方案，可能需要训练多个问题(1)解决方法产生的模型(最坏情况 : 所有涉及到的表，先在子表内部排列组合，然后作笛卡尔积。)。  
        b.靠独立性假设缩小问题a的求解空间规模？  
        c.使用贝叶斯网络分析？  
    (3)问题(1)和问题(2)是否有通用的解决方法。  

    所有节点都应该知晓数据库的schema，局部的data-driven模型，直接在本地训练模型时不涉及数据传输，但解决各节点中数据间的关系，还需要传输数据到某一个用于训练的节点上用机器学习方法找出。为了计算多表连接下各表间的关系还是需要从各节点抽取数据再传输到某一结点上进行计算。但这一过程涉及到的数据量能否有所减小？从各节点本地训练得到的模型是各节点中数据的一种信息压缩，或许可以通过使用这些模型，而不是原始数据的样本来计算多表连接下对应的总体模型。尝试按块采样。q-error不能完全刻画基数估计器在正确率上的特点，从端到端时间方面考虑，越大的基数在查询优化方面会造成的影响越大，所以准确估计大基数的重要性比准确估计小基数大重要性要高。  
## EXPERIMENTAL STUDY  
## RELATED WORKS  
## CONCLUSION
## REFERENCES